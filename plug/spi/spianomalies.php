<?php
//philum_plugin_spianomalies

function spi_anomalies(){return '[H 1| 1| | | | | | ¬ He 2| 1| 2| | | | | ¬ au lieu de| 2| | | | | | ¬ Li 3| 2| 1| | | | | ¬ | | | | | | | ¬ Anomalie 1 : le 12 saute| | | | | | | ¬ Ti 22| 2| 2+6| 2+6+2| 2| | | ¬ Va 23| 2| 2+6| 2+6+3| 2| | | ¬ Cr 24| 2| 2+6| 2+6+5| 1| | | ¬ au lieu de| 2| 2+6| 2+6+4| 2| | | ¬ Mg 25| 2| 2+6| 2+6+5| 2| | | ¬ | | | | | | | ¬ Anomalie 2| le 17 saute| | | | | | ¬ Ni 28| 2| 2+6| 2+6+8| 2| | | ¬ Cu 29| 2| 2+6| 2+6+10| 1| | | ¬ au lieu de| 2| 2+6| 2+6+9| 2| | | ¬ Zn 30| 2| 2+6| 2+6+10| 2| | | ¬ | | | | | | | ¬ Anomalie 3| le 11 saute| | | | | | ¬ Zr 40| 2| 2+6| 2+6+10| 2+6+2| 2| | ¬ Nb 41| 2| 2+6| 2+6+10| 2+6+4| 1| | ¬ au liieu de| 2| 2+6| 2+6+10| 2+6+3| 2| | ¬ Mo 42| 2| 2+6| 2+6+10| 2+6+5| 1| | ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+4| 2| | ¬ Tc 43| 2| 2+6| 2+6+10| 2+6+5| 2| | ¬ | | | | | | | ¬ Anomalie 4| le 14 saute| | | | | | ¬ Ru 44| 2| 2+6| 2+6+10| 2+6+7| 1| | ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+6| 2| | ¬ Rh 45| 2| 2+6| 2+6+10| 2+6+8| 1| | ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+7| 2| | ¬ | | | | | | | ¬ Anomalie 5| le 17 saute| | | | | | ¬ Pd 46| 2| 2+6| 2+6+10| 2+6+10| 0| | ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+8| 2| | ¬ Ag 47| 2| 2+6| 2+6+10| 2+6+10| 1| | ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+9| 2| | ¬ Dc 48| 2| 2+6| 2+6+10| 2+6+10| 2| | ¬ | | | | | | | ¬ Anomalie 6| Le 20 saute| de la couronne précédente| | | | | ¬ Pr 59Ba 56| 2| 2+6| 2+6+10| 2+6+10| 2+6| 2| ¬ La 57| 2| 2+6| 2+6+10| 2+6+10| 2+6+1| 2| ¬ au lieu de 2| 2| 2+6| 2+6+10| 2+6+10+1| 2+6| 2| ¬ Ce 58| 2| 2+6| 2+6+10| 2+6+10+1| 2+6+1| 2| ¬ au lieu de 2| 2| 2+6| 2+6+10| 2+6+10+2| 2+6| 2| ¬ Pr 59| 2| 2+6| 2+6+10| 2+6+10+3| 2+6| 2| ¬ | | | | | | | ¬ Anomalie 7| Le 26 saute| | | | | | ¬ Eu 63| 2| 2+6| 2+6+10| 2+6+10+7| 2+6| 2| ¬ Gd 64| 2| 2+6| 2+6+10| 2+6+10+7| 2+6+1| 2| ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+8| 2+6| 2| ¬ Tb 65| 2| 2+6| 2+6+10| 2+6+10+9| 2+6| 2| ¬ | | | | | | | ¬ Anomalie 8| Le 16 saute| | | | | | ¬ Ir 77| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+7| 2| ¬ Pt 78| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+9| 1| ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+8| 2| ¬ Au 79| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10| 1| ¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+9| 2| ¬ Hg 80| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10| 2| ¬ | | | | | | | ¬ Anomalie 9 : le 19 saute| | | | | | | ¬ Ra 88| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10| 2+6| 2¬ Ac 89| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10| 2+6+1| 2¬ Ac 89| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+1| 2+6| 2¬ Th 90| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10| 2+6+2| 2¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+2| 2+6| 2¬ Pa 91| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+2| 2+6+1| 2¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+3| 2+6| 2¬ U 92| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+3| 2+6+1| 2¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+4| 2+6| 2¬ Np 93| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+4| 2+6+1| 2¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+5| 2+6| 2¬ Pu 94| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+6| 2+6| 2¬ | | | | | | | ¬ Anomalie 10 : le 26 saute| | | | | | | ¬ Am 95| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+7| 2+6| 2¬ Cm 96| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+7| 2+6+1| 2¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+8| 2+6| 2¬ Bk 97| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+9| 2+6| 2¬ | | | | | | | ¬ Anomalie 11 : le 9 saute| | | | | | | ¬ No 102| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6| 2¬ Lr 103| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6| 2+1¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+1| 2¬ Rf 104| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+2| 2¬ | | | | | | | ¬ Anomalie 12 : le16 saute| | | | | | | ¬ Mt 109| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+7| 2¬ Ds 110| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+9| 1¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+8| 2¬ Rg 111| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+10| 1¬ au lieu de| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+9| 2¬ Cn 112| 2| 2+6| 2+6+10| 2+6+10+14| 2+6+10+14| 2+6+10| 2:table]';}

function spianomalies_jb(){
$ret=spi_anomalies(); req('pop,art');
return conn::read($ret,'','');}

function spianomalies_build($p,$o){
if($p)$r=msql::row('','public_atomic',$p);
$rb=explode('-',$r[3]); //pr($rb);
$rings=[0=>2,1=>8,2=>18,3=>32,4=>50];
$subrings=[0=>2,1=>6,2=>10,3=>14,4=>18];
$clr=[0=>'blue',1=>'red',2=>'darkgreen',3=>'darkviolet',4=>'deepskyblue'];
foreach($rb as $k=>$v){//$k=ring
	$max=val($rings,$k); $ic=0;
	for($ia=0;$ia<=$k;$ia++){
		$mx=val($subrings,$ia);
		for($ib=1;$ib<=$mx;$ib++){$ic++;
			$d=bts('font-size:22px; color:'.($ic<=$v?$clr[$ia]:'silver').';',asciinb($ib));
			if(isset($rc[$k][$ia]))$rc[$k][$ia].=$d; else $rc[$k][$ia]=$d;}}
	if($rc[$k])$ret[]=implode('|',$rc[$k]);}
$bt=lj('',$o.'_plug__2_spianomalies_spianomalies*j_'.($p-1).'_'.$o,ascii(129144));
$bt.=lj('',$o.'_plug__2_spianomalies_spianomalies*j_'.($p+1).'_'.$o,ascii(129146)).' ';
$bt.=btn('txtx',$r[0].' '.$r[1].' '.$p.' ('.$r[2].')').br();
if($ret)return $bt.div('',implode(br(),$ret));}

function spianomalies_j($p,$o,$res=''){
$ret=spianomalies_build($p,$o);
return $ret;}

function spianomalies_r(){
return array('aa'=>'a','bb'=>'b');}

function spianomalies_menu($p,$o,$rid){
$ret=lk('/plug/spt',picto('filelist')).' ';
$ret.=lk('/plug/spianomalies',picto('url')).' ';
$ret.=msqbt('','public_atomic').' ';
$ret.=bar($rid,$p,$step=1,$min=1,$max=117,$js='spiatom','360px');
$ret.=lj('',$rid.'_plug__2_spianomalies_spianomalies*jb',picto('txt')).' ';
return $ret;}

function spianomalies_js($id){return '
function checkArrows(e,id){
var n=getbyid(\'bar\'+id).value; //alert(n);
if(e && e.which)var c=e.which; else var c=e.keyCode; //alert(c);
if(c==37)var nb=n-1; if(c==39)var nb=n-(-1); //alert(nb);
getbyid(\'bar\'+id).value=nb;
getbyid(\'lbl\'+id).innerHTML=nb;
SaveJ(\'spa_plug__2_spianomalies_spianomalies*j_\'+(nb)+\'_\'+id);}
addEvent(document,\'keypress\',function(event){checkArrows(event,\'spa\')});

function spiatom(n,id){
	getbyid(\'bar\'+id).value=n;
	getbyid(\'lbl\'+id).innerHTML=n;
	SaveJ(\'spa_plug__2_spianomalies_spianomalies*j_\'+n+\'_\'+id);}
';}

function plug_spianomalies($p=1,$o){$rid='spa'; $p=$p?$p:1;
$bt=spianomalies_menu($p,$o,$rid);
Head::add('jscode',spianomalies_js($rid));
$ret=spianomalies_build($p,$rid);
return $bt.divd($rid,$ret);}

?>